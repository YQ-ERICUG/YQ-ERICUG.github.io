<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>BP Manual 03-Checking Data - Qiang</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Qiang" /><meta name="description" content="Before starting back-projection, we need to check seismic data firstly.
 Download data We recommend to download data recorded at verticle components of dense seismic stations. And convert seismic data to .SAC format.
Select stations Back-projection is a form of time-reversal where we approximate the P wave Green’s function as a time-shifted delta function. This work agrees with tele-seismic arrivals between 30° and 90° where pulses are simple and amplitude variations are small." /><meta name="keywords" content="earthquake, seismology, real-time" />






<meta name="generator" content="Hugo 0.74.3 with theme even" />


<link rel="canonical" href="http://yq-ericug.github.io/post/Check_data/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.8c3cbcb0324c2bb4875ceccba4007cbad4b4ac8377f33af9953c3e7684534a50.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="BP Manual 03-Checking Data" />
<meta property="og:description" content="Before starting back-projection, we need to check seismic data firstly.
 Download data We recommend to download data recorded at verticle components of dense seismic stations. And convert seismic data to .SAC format.
Select stations Back-projection is a form of time-reversal where we approximate the P wave Green’s function as a time-shifted delta function. This work agrees with tele-seismic arrivals between 30° and 90° where pulses are simple and amplitude variations are small." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://yq-ericug.github.io/post/Check_data/" />
<meta property="article:published_time" content="2018-07-02T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-10-24T00:00:00+00:00" />
<meta itemprop="name" content="BP Manual 03-Checking Data">
<meta itemprop="description" content="Before starting back-projection, we need to check seismic data firstly.
 Download data We recommend to download data recorded at verticle components of dense seismic stations. And convert seismic data to .SAC format.
Select stations Back-projection is a form of time-reversal where we approximate the P wave Green’s function as a time-shifted delta function. This work agrees with tele-seismic arrivals between 30° and 90° where pulses are simple and amplitude variations are small.">
<meta itemprop="datePublished" content="2018-07-02T00:00:00+00:00" />
<meta itemprop="dateModified" content="2018-10-24T00:00:00+00:00" />
<meta itemprop="wordCount" content="525">



<meta itemprop="keywords" content="Back-projection,Data processing," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="BP Manual 03-Checking Data"/>
<meta name="twitter:description" content="Before starting back-projection, we need to check seismic data firstly.
 Download data We recommend to download data recorded at verticle components of dense seismic stations. And convert seismic data to .SAC format.
Select stations Back-projection is a form of time-reversal where we approximate the P wave Green’s function as a time-shifted delta function. This work agrees with tele-seismic arrivals between 30° and 90° where pulses are simple and amplitude variations are small."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Qiang</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Qiang</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">BP Manual 03-Checking Data</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-07-02 </span>
        <div class="post-category">
            <a href="/categories/Back-projection-manual/"> Back-projection manual </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#download-data">Download data</a></li>
    <li><a href="#select-stations">Select stations</a></li>
    <li><a href="#remove-repeating-stations">Remove repeating stations</a></li>
    <li><a href="#check-delta">Check delta</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <blockquote>
<p>Before starting back-projection, we need to check seismic data firstly.</p>
</blockquote>
<h2 id="download-data">Download data</h2>
<p>We recommend to download data recorded at verticle components of dense seismic stations. And convert seismic data to <code>.SAC</code> format.</p>
<h2 id="select-stations">Select stations</h2>
<p>Back-projection is a form of time-reversal where we approximate the P wave Green’s function as a time-shifted delta function. This work agrees with tele-seismic arrivals between 30° and 90° where pulses are simple and amplitude variations are small. So, selecting stations with the epicentral distance 30° - 90° is the best choice.</p>
<p><strong>If necessary</strong>, select stations according to azimuth and epicentral distance. Also, you can pick up stations according to their locations (Lon., Lat.).</p>
<p><code>   $ csh Pick_az-d.csh</code></p>
<p><code> # open Pick_az-d.csh to look over all commands</code></p>
<p>Change below parameters according to your requirement:</p>
<pre><code>set a1 = 32                # azimutuh's minimum 
set a2 = 70                # azimutuh's maximum
set d1 = 60                # epicentral distance's minimum
set d2 = 85                # epicentral distance's maximum
</code></pre>
<p><img src="https://raw.githubusercontent.com/YQ-ERICUG/Back-projection/master/wiber1.png" alt="wiber3"></p>
<hr>
<h2 id="remove-repeating-stations">Remove repeating stations</h2>
<p>After downloading seismic data from <a href="http://ds.iris.edu/ds/">IRIS</a> or in another way, sometimes there are two or more repeating stations occurring. To avoid these mistakes, we usually choose only the best waveform from repeating stations according to station names.</p>
<p><code>$ csh Pick_repeat.csh</code></p>
<p><code># open Pick_repeat.csh to look over all commands</code></p>
<p>Click <code>sac PPK</code> image window, if tap &lsquo;A or a&rsquo; in front of &lsquo;F or f&rsquo;, the file will not be deleted, and if tap &lsquo;A or a&rsquo; behind &lsquo;F or f&rsquo;, the file will be deleted.</p>
<center>
<img src="https://raw.githubusercontent.com/YQ-ERICUG/Back-projection/master/check.png" />
</center>
<pre><code>Remove 275 stations, and now there are 512 stations
$ csh  Pick_repeat.csh                              # Check again
Remove 0 stations, and now there are 512 stations
</code></pre>
<hr>
<h2 id="check-delta">Check delta</h2>
<p>It&rsquo;s necessary to check all data&rsquo;s delta to be equal. We often choose the final delta from the delta to occur mostly, and change others into the same delta.</p>
<pre><code>$ saclst delta f *.SAC       # view delta
</code></pre>
<p>Here, there are three deltas(0.02,0.025,0.05). Most of them is 0.025 apparently, so we need change other deltas to 0.025.</p>
<pre><code>   # open Change_delta.f to look over all commands

   if (abs(dt-0.025) .gt. 0.00001) then         !dt:delta
       open(20,file='temp.csh')
        n=len_trim(file2(ista))
       if(abs(dt-0.02) .lt. 0.00001) then        !delta is 0.02_______
        write(20,*) 'echo bd sgf &gt; sac.com'          
        write(20,*) 'echo qdp off &gt;&gt; sac.com'
        write(20,*) 'echo r '(1:7),file2(ista)(1:n),
 &amp;' &gt;&gt; sac.com'(1:11)
        write(20,*) 'echo stretch 4 &gt;&gt; sac.com'   !Stretches (upsamples) data       
        write(20,*) 'echo decimate 5 &gt;&gt; sac.com'  !Decimates (downsamples) data 
        write(20,*) 'echo w over &gt;&gt; sac.com'      !overwrite headers and data
        write(20,*) 'echo quit &gt;&gt; sac.com' 
        write(20,*) 'sac &lt; sac.com'
       close(20)
       call system('csh temp.csh')
       else if(abs(dt-0.05) .lt. 0.00001) then   !delta is 0.05_______
        write(20,*) 'echo bd sgf &gt; sac.com'
        write(20,*) 'echo qdp off &gt;&gt; sac.com'
        write(20,*) 'echo r '(1:7),file2(ista)(1:n),
 &amp;' &gt;&gt; sac.com'(1:11)
        write(20,*) 'echo stretch 2 &gt;&gt; sac.com'   !Stretches (upsamples) data   
        write(20,*) 'echo w over &gt;&gt; sac.com'   
        write(20,*) 'echo quit &gt;&gt; sac.com' 
        write(20,*) 'sac &lt; sac.com'
       close(20)
       call system('csh temp.csh')
      else 
        n=len_trim(file2(ista))
        write(fin,*) 'rm '(1:3),file2(ista)(1:n)
        write(*,*) fin
        close(20)
        call system(fin)             
      end if                   
     end if
</code></pre>
<p>Here is only the example that we change all deltas to 0.025. It&rsquo;s easy to modify the script to change deltas to other values, but remember the command order that stretch(upsamples) must be prior to decimates(downsamples).</p>
<p><code>$ csh Change_delta.csh      </code></p>
<p><code># open Change_delta.csh to look over all commands</code></p>
<hr>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Qiang</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2018-10-24
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/Back-projection/">Back-projection</a>
          <a href="/tags/Data-processing/">Data processing</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/Setting_up/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">BP Manual 04-Setting up grid</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/Introduction/">
            <span class="next-text nav-default">BP Manual 02-Introduction</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:jonyau@cug.edu.cn" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/YQ-ERICUG" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/yao-qiang-62-84" class="iconfont icon-zhihu" title="zhihu"></a>
  <a href="http://yq-ericug.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2018 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Qiang</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>








</body>
</html>
